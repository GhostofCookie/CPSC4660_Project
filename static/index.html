<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SQL Media Comparer</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        {{if .OrigImg}}
        <div class="orig-image"><h4>Original</h4><img src="static/temp/{{.OrigImg}}"></div>
        <div class="pg-image"><h4>Postgres</h4><img src="static/temp/{{.PgImg}}"></div>
        <div class="mq-image"><h4>MySQL</h4><img src="static/temp/{{.MyImg}}"></div>
        {{end}}

        <form class="upload" action="/upload" method="post" enctype="multipart/form-data">
            <label for="image">Image: </label><input name="image" id="image" type="file"><br>
            <input id="submit_u" type="submit" value="Upload Image">
        </form>
        <form class="retrieve" action="/retrieve" method="post" id="retrieve" enctype="application/x-www-form-urlencoded">
            <select name="images" form="retrieve">
            {{if .Imgs}}
                {{range $i , $img := .Imgs}}
                <option value="{{$img}}">{{$img}}</option>
                {{end}}
            {{end}}
            </select>
            <input id="submit_r" type="submit" value="Retrieve Image">
        </form>
        
    </div>
</body>
<script>
document.getElementById("submit_u").addEventListener("click", function(event){
    event.preventDefault();
    submit("/upload");
});
document.getElementById("retrieve").addEventListener("submit", function(event){
    event.preventDefault();
    submit("/retrieve");
});

function submit(url) {
    data = new FormData(document.querySelector('form'));
    xhr = new XMLHttpRequest()
    xhr.open("POST", url, true);
    xhr.send(data);
}
</script>
</html>